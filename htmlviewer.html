<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shipping Price Calculator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
        }
        .container {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            border: 1px solid #ccc;
            border-radius: 10px;
        }
        input, select, button {
            padding: 10px;
            margin: 5px;
            width: 100%;
        }
        .result {
            margin-top: 20px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <h2>Shipping Price Calculator</h2>
        <form id="shippingForm">
            <label for="productPrice">Enter Total Products Price (USD):</label>
            <input type="number" id="productPrice" min="0" placeholder="Total Price in USD">

            <label for="weight">Enter Total Shipment Weight (LB):</label>
            <input type="number" id="weight" min="0" placeholder="Weight in LB">

            <label for="itemType">Select Product Type:</label>
            <select id="itemType">
                <option value="normal">Normal</option>
                <option value="dangerous">Dangerous</option>
            </select>

            <label for="exchangeRate">Select Exchange Rate Type:</label>
            <select id="exchangeRate">
                <option value="bank">Bank Rate</option>
                <option value="market">Market Rate</option>
            </select>

            <button type="button" onclick="calculateShipping()">Calculate</button>
        </form>

        <div class="result" id="result"></div>
    </div>

    <script>
        function calculateShipping() {
            const productPrice = parseFloat(document.getElementById('productPrice').value);
            let weight = parseFloat(document.getElementById('weight').value);
            const itemType = document.getElementById('itemType').value;
            const exchangeRateType = document.getElementById('exchangeRate').value;

            if (isNaN(productPrice) || productPrice <= 0 || isNaN(weight) || weight <= 0) {
                document.getElementById('result').textContent = 'Please enter valid product price and weight.';
                return;
            }

            // Apply minimum weight of 0.25 LB
            if (weight < 0.25) {
                weight = 0.25;
            }

            // Determine exchange rate
            let exchangeRate = exchangeRateType === 'bank' ? 1323 : 1500;

            // Calculate the tax (7% of the product price)
            const tax = productPrice * 0.07;

            // Determine shipping price per LB based on weight and item type (in USD)
            let pricePerLB;
            if (itemType === 'normal') {
                // Normal product shipping prices
                if (weight <= 1) {
                    pricePerLB = 12;
                } else if (weight <= 2) {
                    pricePerLB = 11.50;
                } else if (weight <= 3) {
                    pricePerLB = 11;
                } else if (weight <= 4) {
                    pricePerLB = 10.50;
                } else if (weight <= 5) {
                    pricePerLB = 10;
                } else if (weight <= 10) {
                    pricePerLB = 9.50;
                } else {
                    pricePerLB = 9;
                }
            } else {
                // Dangerous product shipping prices
                if (weight <= 1) {
                    pricePerLB = 32;
                } else if (weight <= 2) {
                    pricePerLB = 30.50;
                } else if (weight <= 3) {
                    pricePerLB = 29.50;
                } else if (weight <= 4) {
                    pricePerLB = 28;
                } else if (weight <= 5) {
                    pricePerLB = 26.50;
                } else if (weight <= 10) {
                    pricePerLB = 25.50;
                } else {
                    pricePerLB = 24;
                }
            }

            // Calculate total shipping price in USD (weight * price per LB)
            const shippingPriceUSD = weight * pricePerLB;

            // Calculate total shipping cost with tax (shipping price + tax)
            let totalShippingUSD = shippingPriceUSD + tax;

            // Apply minimum increment rule when multiplying by 1.05
            let incrementedShipping = totalShippingUSD * 1.05;
            if (incrementedShipping - totalShippingUSD < 1) {
                incrementedShipping = totalShippingUSD + 1;
            }

            // Sum total product price and final shipping price
            const totalProductAndShippingUSD = productPrice + incrementedShipping;

            // Convert total price to IQD (product price + incremented shipping) * exchange rate
            const totalPriceIQD = totalProductAndShippingUSD * exchangeRate;

            // Round up USD to nearest whole number
            const roundedTotalShippingUSD = Math.ceil(totalProductAndShippingUSD);

            // Round up IQD to the nearest thousand
            const roundedTotalPriceIQD = Math.ceil(totalPriceIQD / 1000) * 1000;

            // Display the final rounded result in both USD and IQD
            document.getElementById('result').textContent = `Total shipping cost: ${roundedTotalShippingUSD} USD or ${roundedTotalPriceIQD.toFixed(0)} IQD`;
        }
    </script>
</body>
</html>
